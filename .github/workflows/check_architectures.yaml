#
# Copyright (c) 2021 Red Hat, Inc.
# This program and the accompanying materials are made
# available under the terms of the Eclipse Public License 2.0
# which is available at https://www.eclipse.org/legal/epl-2.0/
#
# SPDX-License-Identifier: EPL-2.0
#
name: Check Architectures

on:
  pull_request:
    branches: [ 244-new-1 ]

jobs:
  check_architectures:
    name: Check Stack and Sample Architectures
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    # - name: get PR diff
    #   run: |
    #     git remote -v
    #     git fetch origin master
    #     git diff origin/master..HEAD --name-only > mydiff
    #     echo "mydiff = "
    #     cat mydiff
    - name: test action out
      id: mf
      uses: technote-space/get-diff-action@v4
      with:
        PATTERNS: |
          +(stacks)/**/devfile.yaml
          extraDevfileEntries.yaml
        # FILES: devfile.yaml
    - name: show with env
      run: echo GIT_DIFF ${{ env.GIT_DIFF }}, GIT_DIFF_FILTERED ${{ env.GIT_DIFF_FILTERED }}, MATCHED_FILES ${{ env.MATCHED_FILES }}
    - name: show with output
      run: echo ${{ steps.mf.outputs.diff }}
